version: '3'
services:
    myapp:
      build:
        content: 
      depends_on:
          - mysql
          - redis

    mysql:
      image: 'mysql:5.7'
      ports:
        - '33066:3306'
      environment:
        MYSQL_ROOT_PASSWORD: ${DB_PASSWORD}
        MYSQL_DATABASE: '${DB_DATABASE}'
        MYSQL_USER: '${DB_USERNAME}'
        MYSQL_PASSWORD: '${DB_PASSWORD}'
        MYSQL_ALLOW_EMPTY_PASSWORD: 'yes'
      volumes:
        - mysql-data:/var/lib/mysql

    redis:
      image: 'redis:alpine'
      ports:
        - '63799:6379'
      volumes:
        - 'redis-data:/data'

    
volumes:
    mysql-data:
    redis-data: